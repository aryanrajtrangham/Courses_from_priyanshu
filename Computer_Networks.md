# Computer Networks

## Syllabus

1. Fundamentals
2. Data link layer
3. Network layer
4. Transport layer
5. Application layer
6. Network Security

## Fundamentals

### Definition - Computer Network

- A computer network is a set of nodes connected by communication links
- A node can be a computer, printer or any other device capabele of sending / receiving data generated by other nodes in the network
  - Example: computer, server, printer, security camera etc.
- A communication link can be wired link or wireless link. The link carries the information.
  - links:  wired : cable, wireless: air.

 End devices  | Intermediary devices
--------------|---------------------
 PC           | Router
 Printer      | Wireless Router
 Server       | Cell Tower
 Tablet       | Modem
 Smart Phone  | Internet card

### Basic characteristic of computer network

- Fault tolerance
  - The ability to:
    - Continue working despite failure
    - Ensure no loss of service
- Scalability
  - The ability to:
    - Grow based on the needs
    - Have good performance after growth
- Quality of Service (QoS)
  - The ability to:
    - Set Priorities
    - Manage data traffic to reduce data loss, delay etc
- Security
  - The ability to prevent:
    - Unauthorized access
    - Misuse
    - Forgery
  - The ability to provide:
    - Confidentiality
    - Integrity
    - Availability

### Network Protocols and Communication

- Data communication are the exchange of data between two nodes via some form of link (transmission medium) such as a cable.

- Data flow
  - Simplex:
    - Communication is undirectional
    - One device can transmit and the other device will receive
    - Example: keyboards, traditional monitors.
  - Half duplex
    - Communication is in both directional but not at the same time.
    - If one device is sending, the other can only receive, and vice versa
    - Example: Walkie-talkies
  - Full deplex/ Duplex
    - Communication is in both directions simultaneously.
    - Device can send and receive at the same time.
    - Example: Telephone line.

- Protocols
  - All communication schemes will have the following things in common
    - Source or sender
    - Destination or receiver
    - Channel or media
  - Rules or protocols govern all methods of communication.
  - It is a set of rules that govern data communication.
  - Protocols determines
    - What is communicated ?
    - How it is communicated ?
    - When it is communicated ?
  - Protocols used in network communications also define
    - Message encoding
    - Message formatting and encapsultion
    - Message timing
    - Message size
    - Message delivery options
  - These are also known as elements of protocol
  - Message encoding

    ```[]
      Message ==> Encoder  ==> Transmitter ==> Transmitter ==> Receiver ==> Decoder  ==> Message
      Source      (Signal)                      Medium                      (Signal)    Destination
    ```

  - Message formatting and encapsultion
    - Agreed format
      - Encapsulation the information to identify the sender and the receiver rightly.
  - Message size
    - Humans break long messages into smaller parts or sentences.
    - Long messages must also be broken into smaller pieces to travel across a network.
  - Message Timing
    - Flow control
    - Response Timeout
  - Message delivery options
    - Unicast
    - Multicast
    - Broadcast

- Types of computer network
  - Peer-to-peer Network
    - No Centralized administration
    - All peers are equal
    - Simple sharing appications
    - Not scalable
  - Client Server Network (request-response model)
    - Centralized administration
    - Request-Response model
    - Scalable
    - Server may be overloaded

- Components of a computer network
  - Nodes
    - End nodes (End devices)
      - Computer
      - Network Printers
      - VoIP Phones
      - Telepresence endpoint
      - Security cemeras
      - Mobile handheld devices (Smart phones, tablets, Personal Digital Assistances, Wireless debit/credit card reader, barcode scanner)
    - Intermediary nodes (intermediary devices)
      - Switches
      - Wireless acess Point
      - Routers
      - Security Devices (Firewall)
      - Bridges
      - Hubs
      - Repeaters
      - Cell Tower
  - Media
    - Wired medium (Guided medium)
      - Ethernet straight-through cable (connects two devices of different kind)
      - Ethernet crossover cable (connects two devices of same kind)
      - Fiber optic cable
      - Coaxial cable
      - USB cable (Universal serial bus)
    - Wireless medium (unguided medium)
      - Infrared (Ex: short range communication - TV remote control)
      - Radio (Ex: Bluetooth, Wi-Fi)
      - Microwaves (Ex: Callular System)
      - Satellite (Ex: long range communication - GPS)
  - Services
    - e-mail
    - storage services
    - file sharing
    - instant messaging
    - online game
    - VOIP (voice over IP)
    - video telephone
    - www (world wide web)

### Classification of Computer Network

- Local Area Network (LAN)
  - A local Area network (LAN) is a computer network that interconnects computer within a limited area such as a residence, school, laboratory, university campus or office building.
  - LAN devices :
    - Wired LAN (Ex: Ethernet- Hub, Switch)
    - Wireless LAN (Ex: Wi-Fi)

- Metropolitan Area network (MAN)
  - A metropolitan area network is a computer network that interconnects users with computer resources in a geographic region of the size of a metropolitan area (City).
  - MAN devices :
    - Swithces/Hub
    - Router/Bridges

- Wide Area Network (WAN)
  - A wide area network (WAN) is a telecomunications network that extends over a large geographical area for the primary purpose of computer networking.
  - WAN devices :
    - End devices and intermediary devices

- New Trends
  - Bring your own device (BYOD)
  - Online collaboration
  - Cloud computing

- Storage Area network (SAN)
  - It is the on-demand availability of computer system resources, especially data storage and computing power, without direct active management by the user.
  - Google drive
  - Azure storage service

### Network Topology

- Arrangement of nodes of a computer network.
- Topology = Layout
  - Physical Topology - Placement of various nodes.
  - Logical Topology - Deals with the data flow in the network

- Bus topology
  - All data transmitted between nodes in the network is transmitted over this *common transmission medium* and is able to be received by all nodes in the network simultaneously.
  - A signal containing the address of the intended receiving machine travels from a source machine in *both direction* to all machines connected to the bus until it finds the intended recipient.
  - Advantages |  Disadvantages
    -----------|-----------------
    Only one wire - less expensive | Not fault tolerant (No redundancy)
    Suited for temporary network   | Limited cable length
    Node failure does not affect other | No security

- Ring topology (Token ring topology)
  - A ring topology is a bus topology in a closed loop.
  - Peer-to-peer LAN topology
  - Two connections: one to each of its nearest neighbors
  - Unidirectional
  - Sending and receiving data takes place with the help of a *TOKEN*.
  - Advantages |  Disadvantages
    -----------|-----------------
    Performance better than Bus topology | Unidirectional. Single point of failure will affect the whole network
     _ | More load decreases the performance
     _ | Can cause bottleneck due to weak links
    All nodes with equal access | No security

- Star topology
  - Every node is connected to a central node callled a hub or switch
  - Centralized Management
  - All traffic must pass through the hub or switch
  - Advantages | Disadvantages
    -----------|----------------
    Easy to design and implement. | Single point of failure affects the whole network.
    Centralized administration. | Bottleneck due to overloaded switch/Hub.
    Scalable. | Increased cost due to switch/hub.
  - Two star topologies can be connected by a repeater.

- Mesh topology
  - Each node is directly connected to every other nodes in the network
  - Fault tolerant and reliable.
  - Advantages | Disadvantages
    -----------|----------------
    Fault tolerant. | Issues with braodcasting messages
    Reliable | Expensive and impractical for large networks

- Hybrid topology
  - It contains one or more topologies

### Basic of IP addressing

- IP Adressing
  - IP stands for Internet Protocol.
  - Every node in the computer network is identified with the help of IP address.

- IP Address (IPV4)
  - Every node in the computer network is identified with the help of IP address.
  - Logical address: We can change based on the location of the device.
  - Assigned by manually or dynamically.
  - Represented in decimal and it has 4 octets (x.x.x.x).
  - 0.0.0.0 to 255.255.255.255 (32 bits).

### Basics of MAC addressing

- MAC stands for Media Access Control.
- MAC address = Physical address
- Every node in the LAN is identified with the help of MAC address.
- IP Address = Location of a person
- MAC Address = Name of the person

- MAC Address
  - Every node in the LAN is identified with the help of MAC address
  - Physical address or Hardware Address
  - Unique, cannot be cahnged
  - Assigned by the manufacturer
  - Represented in haxadecimal
  - Example: 70-20-84-00-ED-FC (48 bits)
  - Seperator: hyphen(-), period(.) and colon(:)

 IP address | MAC Address |
-----------|-------------
 Needed for communication. | Needed for communication.
 32 bits | 48 bits
 Represented in decimal. | Represented in hexadecimal.
 Router needs IP Address to forward data | Switch needs MAC address to forward data.
 Example : 10.10.23.56 | Example : 70-20-84-00-FD-FC

### Basics of Port addressing

- Derivations from analogy
  - Reaching our city = Reaching our network (IP address)
  - Reaching our Apartment = Reaching the host (MAC address)
  - Reaching the right person = Reaching the right process (Port address)

- Port Address or Port Numbers
  - In a node, many processes will be running
  - Data which are sent/received must reach the right process
  - Every process in a node is uniquely identified using port numbers
  - Port = Communication endpoint
  - Fixed port numbers and dynamic port numbers (0 - 65535)
  - Example :
    - Fixed port numbers: 25, 80 etc.
    - OS assigned dynamic port numbers: 62414.
  - Three key points : Before sending the data , any node must
    - Attach source IP address and destination IP address.
    - Attach source MAC address and destination MAC address.
    - Attach source port number and destination port number.

### Switching Techniques

- Swithching in computer network helps i deciding the best route for data transmission if there are multiple path in a larger network
- One-to-One connection.
- Switching Techniques
  - Circuit Switching
    - A dedicated path is established between the sender and receiver.
    - Before data transfer, connection will be established
    - Example: Telephone network
    - 3 phase in circuit switching
      - Connection establishment
      - Data transfer
      - Connection disconnection

  - Message Switching
    - Store and forward mechanism
    - Message is transferred as a complete unit and forwarded using store and forward mechanism at the intermediary node.
    - Not suited for streaming media and real-time applications.

  - Packet Switching
    - The internet is a packet switchd network.
    - Message is broken into individual chunks called as *packets*
    - Each packet is sent individually.
    - Each packet will have *source and destination IP address* with sequence number.
    - Sequence numbers help the receiver to -
      - Reorder the packets
      - Detect missing packets and
      - Send acknowledgments
    - Two approaches to packet switching
      - Datagram Approach
        - Datagram Packet Switching is also known as *connectionless switching*.
        - Each independent entity is called as datagram
        - Datagrams contain destination information and the intermediary device uses this information to forward datagrams to right destination.
        - In datagram Packet Switching aproach, the path is not fixed.
        - Intermediate nodes take the routing decisions to forward the packets
      - Virtual Circuit Approach
        - Virtual Circuit Switching is also known as *connection-oriented switching*.
        - In the case of Virtual circuit switching, a preplanned route is established before the messages are sent.
        - Call request and call accept packets are used to establish the connection between sender and receiver.
        - In this approach, the path is fixed for duration of a logical connection.

### Layering in Computer Networks

- Layering
  - Layering means decomposing the problem into more manageable components (layers).
  - Advantages :
    - It provides more modular design.
    - Easy to troubleshoot.

- Protocols
  - It is a set of rules that govern data communication.
  - The *protocols* in each layer governs the activities of the data communication.

- Layered Architectures
  - The OSI reference model
    - OSI = Open System Interconnection
    - It is a model for understanding and designing a network architecture that is flexible, robust and interoperable
    - Developed by the International Standards Organization (ISO)
    - The OSI model is not a *protocol*.
    - It is only a guideline and hence it is refererred as OSI reference model.
    - The purpose of OSI model is to show how to facilitate communication between different systems without requiring changes to the logic of underlying hardware and software.
    - The OSI model was never fully implemented. (It's just a guidline)

  - The TCP/IP model
    - TCP/IP = Transmission Control Protocol/Internet Protocol.
    - The TCP/IP protocol suite was developed prior to the OSI model.
    - Therefore, the layers in the TCP/IP protocol suite do not exactly match those in the OSI model.
    - *TCP/IP is a hierarchical protocol* made up of interactive modules, each of which provides a specific functionality.

### The OSI Reference Model

- Layers

  ```[]
     Shortcut            Layers
    +------------+ +---------------------+
    | Away       | | Application Layer   |
    +------------+ +---------------------+
    | Pizza      | | Presentation Layer  |
    +------------+ +---------------------+
    | Sausage    | | Session Layer       |
    +------------+ +---------------------+
    | Throw      | | Transport Layer     |
    +------------+ +---------------------+
    | Not        | | Network Layer       |
    +------------+ +---------------------+
    | Do         | | Data Link Layer     |
    +------------+ +---------------------+
    | Please     | | Physical Layer      |
    +------------+ +---------------------+
  ```

- Physical comunication

  ```[]
        Device A             intermediate node    intermediate node         Device B
          [_]                    (x)                  (x)                     [_]
          ===                     |                    |                      ===
           +----------------------+--------------------+------------------------+
    +-----------------+      Peer to peer protocol (7th layer)          +-----------------+
    7  Application    |<----------------------------------------------->|  Application    7
    +--7-6 interface--+      Peer to peer protocol (6th layer)          +--7-6 interface--+
    6  Presentation   |<----------------------------------------------->|  Presentation   6
    +--6-5 interface--+      Peer to peer protocol (5th layer)          +--6-5 interface--+
    5  Session        |<----------------------------------------------->|  Session        5
    +--5-4 interface--+      Peer to peer protocol (4th layer)          +--5-4 interface--+
    4  Transport      |<----------------------------------------------->|  Transport      4
    +--4-3 interface--+  3rd  +------------+  3rd  +------------+  3rd  +--4-3 interface--+
    3  Network        |<----->|  Network   |<----->|  Network   |<----->|  Network        3
    +--3-2 interface--+  2nd  +------------+  2nd  +------------+  2nd  +--3-2 interface--+
    2  Data Link      |<----->|  Data Link |<----->|  Data Link |<----->|  Data Link      2
    +--2-1 interface--+  1st  +------------+  1st  +------------+  1st  +--2-1 interface--+
    1  Physical       |<----->|  Physical  |<----->|  Physical  |<----->|  Physical       1
    +--------+--------+       +-----+------+       +-----+------+       +---------+-------+
             +----------------------+--------------------+------------------------+

  ```

- Application Layer
  - It enables the user to access the network resources.
  - Services provided by Application Layer
    - File Transfer and Access Management (FTAM).
    - Mail Services
    - Directory services

- Presentation Layer
  - It is concerned with the syntax and semantics of the information exchanged between two systems.
  - Services provided by Presentation Layer
    - Translation (Converting data into common format)
    - Encryption
    - Compression

- Session Layer
  - It establishes, maintains and synchronizes the interaction among communication devices
  - Services provided by Session Layer
    - Dialog control (determine one-way or multi-way)
    - Synchronization (fault tolerant)

- Transport Layer
  - It is responsible for process to process delivery of the entire message.
  - Services provided by Transport Layer
    - Port addressing
    - Segmentation and Reassembly
    - Connection Control (Connection-orient or conectionless-service)
    - End-to-End Flow Control
    - Error Control

- Network Layer
  - It is responsible for delivery of data from the original source to the destination network.
  - Services provided by Network Layer
    - Logical addressing (IP addresssing)
    - Routing

- Data Link Layer
  - It is responsible for moving data (frames) from one node to another node.
  - Services provided by Data Link Layer
    - Framing
    - Physical Addressing
    - Flow Control
    - Error Control
    - Access Control

- Physical Layer
  - It is responsible for transmitting bits over a medium.
  - It also provides electrical and mechanical specifications.
  - Services provided by Physical Layer
    - Physical characteristics of the media
    - Representation of bits
    - Data rate
    - Synchronization of bits
    - Line configuration
    - Physical topology
    - Transmition mode (determine simplex or duplex)

- Service offered ny each layer
  - Application Layer = FTAM, Mail Services & Directory Service
  - Presentation Layer = Translation, Encryption & Compression
  - Session Layer = Dialog Control & Synchronization
  - Transport Layer = Port addressing ,Segmentation & Reassembly, Connection Control, Flow control & Error Control.
  - Network Layer = Logical Addressing and Routing
  - Data Link Layer = Framiong, Physical Addressing, Flow Control, Error Control & Access Control
  - Physical Layer = Physical characteristic of the media, Representation of bits, Data rate, Synchronization of bits, Line configuration, Physical topology & Transmission mode.

### Addressing in Networking

- IP Addressing and MAC Addressing :
  - Nodes put routers ip address and forward the packets
  - Router search with the help of mac address and then forward the packets
    - to destination node
    - by changing ip address to different routers

### The TCP/IP Protocol Suite

- Layers

  ```[]
      OSI Reference model      vs         TCP/IP model
    +---------------------+             +---------------------+
    | Application Layer   |  HTTP, DNS  |                     |
    +---------------------+  DHCP, FTP  |  Application Layer  |
    | Presentation Layer  |             |                     |
    +---------------------+             |                     |
    | Session Layer       |             |                     |
    +---------------------+             +---------------------+
    | Transport Layer     |  TCP, UDP   |  Transport Layer    |
    +---------------------+             +---------------------+
    | Network Layer       | IP, ICMPv6  |  Internet           |
    +---------------------+             +---------------------+
    | Data Link Layer     |  PPP,       |                     |
    +---------------------+ Frame Relay |  Network Access     |
    | Physical Layer      |  Ethernet   |       Layer         |
    +---------------------+             +---------------------+
  ```

- Protocol Data Unit (PDU)
  - Protocol Data Units (PDUs) are named according to the protocols of the TCP/IP suite: data, segment, packet, frame and bits.
    - Application Layer - Data
    - Transport Layer - Segment
    - Network Layer - Packet
    - Data Link Layer - Frame (hosts)
    - Physical Layer - Bit (adaptors)

### Basic Networking Commands

- ipconfig
- ipconfig/all
- nsloookup
- ping
- tracert

### Basics of Cisco Packet Tracer

- Cisco - The leader in networking
  - An innovative and powerful networking simulation tool used for practice, discovery and troubleshooting.
  - Helps understand networks practically.

- Hub a.k.a Network hub
  - Hub works at the physical layer of the OSI model.
  - Used to set uo LAN
  - Has multiple ports
  - Star topology
  - When a packet arrives at one port, it's copied to the other ports so that all segments of the LAN can see all packets.
  - Pros
    - Cheaper than switches.
    - Works good for smaller network.
  - Cons
    - Issues with broadcast
    - No memory
    - Narmally runs in half duplex mode.

- Switch = A switch is a networking hardware that connects devices on a computer network to establish a local area network.
  - Unlike hub, switch has memory.
  - Stores MAC address table.
  - Layer 2 device for setting up LAN.

 Hub                       | Switch
---------------------------|--------------------------------
 Layer 1 device            | Layer 2 device
 Works at physical layer   | Works at Data Link layer
 Has no memory             | Has memory and stores MAC address table
 Not an intelligent device | Intelligent device
 Floods the network due to broadcasting | Can do unicasting and broadcasting.
 Security risks are high.  | Security risks are low.
 Less efficient            | More efficient
 Half Duplex               | Full Duplex.

- Router = A router is a networking device that forwards data packets between computer networks.
  - A router is a connected to at least two networks, commonly two LANs or WANs or a LAN and its ISP network.
  - It is a layer 3 (Network layer) device.
  - Stores routing table.

 Switch                    | Router
---------------------------|----------------------------
 A network switch is a computer networking device that is used to connect many devices together on a computer network | A router is a networking device that connects a local network to other local networks.
 Operates at layer 2 (Data Link Layer) | Operates at layer 3 (Network Layer)
 Has memory and stores MAC address table | Has memory and stores Routing table.
 Decisions are taken based on MAC address | Decisions are taken based on IP address.
 Half / Full Duplex      | Full Duplex
 LAN                     | LAN,MAN & WAN

- Repeater
  - The data signals generally becomes too weak or corrupted if they tend travel a long distance
  - Reapeater regenerates the signal over the same network.
  - It operated at the physical layer.
  - They do not amplify the signal.
  - It is a 2 port device.

### Basics of Bridge

- Bridge = Repeater + Functionality of reading MAC address.
- It is a layer 2 device.
- It's also used for interconnecting two LANs on the *same protocol*.
- It is also a two port device.
- Types of Bridges
  - Transparent Bridges
    - These are the bridges in which the statoins are completely unaware of the bridge's existence.
    - Reconfiguration of the stations is unnecessary even if bridge is added or removed from network.
  - Source Routing Bridges
    - In these bridges, routing operation is performed by source station and the frame specifies which route to follow.

 Bridge                               | Router
--------------------------------------|-----------------------------------------------
 Bridge works in data link layer.     | Router works in network layer.
 Through bridge, data or information is not store and sent in the form of packet. | Through router, data or information is store and sent in the form of packet.
 There are only two ports in bridge.  | There are more than two ports in router.
 Bridge connects two different LANs.  | Router is used by LAN as well as MAN for connection.
 In bridge, routing table is not used.| In routers, routing table is used.
 Bridge works on single broadcast domain.| Router works on more than single broadcast domain.
 Bridges are easy to configure.       | Routers are difficult to setup and configure.
 Bridge focuses on MAC address .      | Router focuses on protocol address.
 Bridge is comparatively inexpensive. | Router is relatively expensive device.
 Bridges are good for segment network and extends the existing network.| Routers are good for joining remote networks.

### Network Devices

- List of various networking devices
  - Repeater <- Layer 1 device
  - Hub <- Layer 1 device
  - Switch <- Layer 2 device
  - Bridge <- Layer 2 device
  - Router <- Layer 3 device
  - Multi-layer switch (Layer 3 switch) <- Layer 3 device
  - Brouter (Bridge + router) <- Layer 2/3 device
  - Modem
  - Firewall (Security device)

### Physical Layer and Media

- Fundamental principles of Physical Layer
  - One of the major functions of the physical layer is to move data in the form of electromagnetic signals across a tranmission medium.
  - The data usable to a person or an application are not in a form that can be transmitted over a network.
  - For example, an image must first be changed to a form that transmission media can accept.
  - To be transmitted, data must be transformed to electromagnetic signals.

- Signal
  - It is a function that represents the variation of a physical quantity with respect to time.
  - Example: VAriation in temperature of a city in one day i.e. 24 hours.
  - Analog Signal
    - It is the signal that can take any value in the defined range.
    - All real-life signals are analog in nature
  - Digital Signal
    - It is the signal that can take on of the finite values at any given time.
    - In case of digital signals, we discretize both time and magnitude.
  - Comparison of various physical media

     Media        | Physical Component    | Signal
    --------------|-----------------------|----------
     Copper cable </br>(wired) | UTP/STP </br> Coaxial </br> Connectors </br> NICs </br> Ports/interfaces              | Electromagnetic Signal
     Fiber Optic </br> Cable </br> (Wired) | Single-mode Fiber </br> Multimode Fiber </br> Connectors   </br> Lasers and LEDs  | A light pulse equal 1 </br> No light pulse is 0.
     Wireless Media | Access Points </br> NICs </br> Radio </br> Antennae | Radio waves

- Wired Media
  - Copper cable (Ethernet cable)
    - Unshielded Twisted Pair (UTP)
      - CrossTalk
        - UTP cable does not use shielding to counter the effects of EMI and RFI.
        - The negative effect of crosstalk can be limited by varying the number of twists per wire pair.
    - Shielded Twisted Pair (STP)
  - Copper coaxial cable
  - Fiber optic cable
    - The cable transmit signal in the form of light waves
    - High Speed transmission.
  - Copper vs Fiber Optic Media
  
     Implementation Points     | Copper            | Fiber Optic
    ---------------------------|-------------------|-------------------
     Bandwidth Supported       | 10 Mbps - 10 Gbps | 10 Mbps - 100 Gbps
     Range | Relatively short (upto 100 meters) | Relatively high (upto 100,000 meters)
     Immunity to EMI and RFI   | Low            | High (Completely immune)
     Immunity to Electrical Hazards  | Low      | High (Completely immune)
     Media and Connector Costs | Lowest         | Highest
     Installation Skills Required | Lowest      | Highest
     Safety                    | Lowets         | Highest
  
- Wireless Media
  - Wireless media has the following areas of concern
    - Coverage area
    - Interference
    - Security
  - Wireless technologies
    - Wi fi
    - Bluetooth
    - Wi max

### Line Configuration

- In a network, two or more nodes are connected by a communication link.
- The communication link can be wired or wireless.
- For visualization purpose, links are imagined as a line drawn between two points.
- For communication to happen, two nodes must be connected to the same link at the same time.
- This is called as line configuration or *connection*.
- Types of Line Configuration
  - Point-to-point Connection
    - A point-to-point connection provides a dedicated link between two devices.
    - The entire capacity of the link is reserved for transmission betweeen those two devices.
  - Multipoint Connection
    - It is also called Multidrop configuration or Broadcast connection.
    - In this connecion, two or more devices share a single link.
    - Since more thatwo devices share the link, the capacity of the channel is shared now.
    - It can be spatial or temporal.

## Data link layer

- It is responsible for moving data(frames) from one node to another node.

### Link Layer Services

- Framing
  - The data link layer needs to pack bits into frames, so that each frame is ditinguishable from another.
  - Our postal system practices a type of framing.
  - The simple act of inserting a letter into an envelope separates one piece of information from another; the envelope serves as the delimiter.
- Physical Addressing
  - A frame is the encapsulation of header and trailer information with the packet.
  - In the header, the source and the destination MAC address are dealt.
- Flow Control
  - Flow Control is one of the duties of data link control sublayer.
  - The flow control in data link layer is end to end flow control.
  - Speed matching machanism.
  - Flow control coordinates the amount of data that can be sent before receiving an acknowledgement.
- Access Control
  - Media access control
- Error Control
  - Error Detection
  - Error Correction

### Sublayers of the Data Link Layer

```[]
  +-------------------------------------------------------+
  |                   Network                             |
  +----------------+-----------------------+--------------+
  |                | LLC Sublayer          | IEEE 802.15  |
  | Data link      |                       | Bluetooth    |
  |                +-----------------------+--------------+
  |                | MAC sublayer          | IEEE 802.11  |
  |                |                       |   Wi-Fi      |
  +----------------+-----------------------+--------------+
  |       Physical                         | IEEE 802.3   |
  |                                        | Ethernet     |
  +----------------------------------------+--------------+
```

- LLC sublayer
  - Logical Link Control (LLC) or Data Link Control (DLC) sublayer
  - Handles communication between upper and lower layers.
  - Takes the network protocol data and adds control information to help deliver the packet to the destinstion. (Flow control)

- MAC sublayer
  - Constitutes the lower sublayer of the date link layer
  - Implemented by hardware, typically in the computer NIC.
  - Two primary responsibilities
    - Data encapsulation
      - Frame assembly before transmission and frame disassembly upon reception of a frame.
      - MAC layer adds a header and trailer to the network layer PDU.
      - Provides three primary functions
        - Framing
        - Physical Addressing or MAC Addressing.
        - Error control.
    - Media access control
      - Responsible for the placement of frames on the media and the removal of frames from the media.

### Framing

- Framing in the data link layer separates a frame distinguisable from another frame
- Frame = Header + Network Layer PDU + Trailer
- In packet switched network, the block of data called frames are exchanged between nodes, not bits streams.
- When node A wishes to transmit a frame to node B, it tells its adaptor to transmit a frame from the node's memory.
- This results in a sequence of bits being sent over the link.
- The adaptor on node B then collects together the sequence of bits arrivingg on the link and deposits the corresponding frame in B's memory.
- Types of Framing
  - Fixed-size framing
    - Here the size of the frame is fixed and so the frame length acts as delemiter of the frame.
    - Consequently, it does not require additional boundary bits to identify the start and end of the frame.
  - Variable-size framing
    - Here, the size of each frame to be transmitted may be different.
    - So additional mechanisms are kept to mark the end of one frame and the beginning of the next frame.
- Various framing Approaches
  - Bit Oriented
    - It simply views the frame as a collection of bits.
    - In bit-oriented framing, data is transmitted as a sequence of bits that can be interpreted in the upper layers both as text as well as multinedia data.
    - Bit Oriented Protocol
      - High-level Data Link Control (HDLC)
  - Byte Oriented
    - a.k.a Character Oriented Approach
    - One of the oldest approaches to framing.
    - Here each frame is viewed as a collection of bytes (characters) rather than bits.
    - Byte Oriented Protocols
      - Binary Synchronous Communication Protocol (BISYNC)
      - Digital Data Communication Message Protocol (DDCMP)
      - Point-to-point Protocol (PPP)
  - Clock Based Framing
    - The third approach to framing
    - Example = Synchronous Optical Network Protocol (SONET)

### High-level Data Link Control (HDLC)

- The Synchronous Data Link Control (SDLC) protocol developed by IBM is an example of a bit-oriented protocol.
- SDLC was later standardized by the ISO as the High-Level Data Link Control (HDLC) protocol.
- Bit-Oriented protocol
- HDLC - Frame Format
    8         | 16         | variable length | 16  | 8
  ------------|--------------|---------------|-----|------------
    Begining </br> Sequence | Header | Body  | CRC | Ending</br> Sequence
  - Beginning and Ending Sequences: 01111110
    - This sequence is also transmitted during any times that the link is idle so that the sender and receiver can keep their clocks synchronized.
  - Header : Address and Control Field.
  - Body : Payload (Variable size)
  - CRC : Cyclic Redundancy Check - Error Detection
- Types of HDLC Frames
  - The type of frame is determine by the control field.
    - I-Frame : Information Frame (1st bit is 0)
    - S-Frame : Supervisory Frame (1st two bits are 10)
    - U-Frame : Un-numbered Frame (1st two bits are 11)

- Bit Stuffing : Bit stuffing refers to the insertion of one or more bits into a data transmission as a way to provide signaling information to a receiver. The receiver knows how to detect, remove or disregard the stuffed bits.

### Binary Synchronous Communication Protocol (BSC/ BiSYNC)

- It is a sentinel approach.
- Developed by IBM
- Also referred as BSC.
- It is a byte-oriented protocol.
- BiSync - Frame Format
   8    | 8    | 8    |          | 8    | variable length | 8    | 16
  ------|------|------|----------|------|-----------------|------|------
   SYN  | SYN  | SOH  | Header   | STX  | Body            | ETX  | CRC
  - Frames transmitted begining with leftmost field.
  - Beginning of a frame is denoted by sending a special SYN (synchronize) character.
  - Data portion of the frame is contained between special sentinel character STX (start of text) and ETX (end of text).
  - SOH : Start of Header.
  - DLE : Data Link Escape.
  - CRC : Cyclic Redundancy Check.

- Character Stuffing : Byte Stuffing or Character Stuffing is the process of adding one extra byte whenever there is a flag or escape character in the text.
  - This is done by data link escape(DLE) in BISYNC protocol.

### Point-to-Point Protocol (PPP)

- It is a byte-oriented protocol.
- PPP is a datalink layer protocol.
- PPP is a WAN protocol and which is commonly run over Internet links.
- It is widely used in broadband communications having heavy loads and high speeds.
- It is used to transmit multiprotocol data between two directly connected (point-to-point) computers.
- PPP - Frame Format
   8     | 8     | 8     | 8/16   |           | 16       | 8
  -------|-------|-------|--------|-----------|----------|------
   Flag  |Address|Control|Protocol| Payload   | Checksum | Flag
  - Flag : 1 byte that marks the beginning and the end of the frame. The bit pattern of the flag is 01111110.
  - Address : 1 byte which is set to 1111,1111 in case of broadcast.
  - Control : 1 byte set to a constant value of 11000000.
  - Protocol : 1 or 2 bytes that define the type of data contained in the payload field.
  - Payload : This carries the data from the network layer. The maximum length of the payload is 1500 bytes. However, this may be negotiated between the endpoints of communication.
  - Checksum : Error detection

- Character Stuffing : Byte stuffing or Character stuffing is the process of adding one extra byte whenever there ia a flag sequence appear in the payload.

### Digital Data Communication Message Protocol (DDCMP)

- It is a byte-oriented protocol.
- Devised by Digital Equipment Corporation.
- It is a byte-counting appraoch
- Count field in the frame format
  - Count : How many bytes are contained in the frame body?
- DDCMP - Frame Format
   8    | 8    | 8     | 14    | 42     | variable length | 16
  ------|------|-------|-------|--------|-----------------|-------
   SYN  | SYN  | Class | Count | Header | Body            | CRC
  - Danger with the count field
    - One danger with this approch is that if transmission error could corrupt the count field then the end of the frame would not be correctly detected by the receiver.

### Error Detection

- Error
  - Data are transmitted in the network.
  - The data can be corrupted during transmission.
  - Transmission error.
  - For reliable communication, errors must be detected and corrected.
  - Error detection and correction are implemented either at the data link layer or the transport layer of the OSI model.
  - Types of error
    - Bit Error (single bit error)
      - In a single bit error, only 1 bit in the data unit has been changed.
    - Burst Error
      - In burst error, 2 or more bits in the data unit have changed.
  - Error detection
    - Error detection means to decide whether the received data is correct or not without having a copy of the original message.
    - To detect or correct errors, we need to send some extra bits with the data.
    - The extra bits are called as redundant bits.
  - Redundancy

    ```[]
    +---------------------+            +------------------------+
    |        Data         |            |                        |
    |  101000000000010101 |            |                        |
    |          |          |            |       +-----> Accept   |
    |      generating     |            |  Checking              |
    |       function      |            |  function              |
    |          |          |            |       +-----> Reject   |
    |       1011101       |            |                        |
    |  Redundancy check   |            |             (Receiver) |
    +----------|----------+            +------------|-----------+
    sender     |      Data & redundancy check       |
               +-->[1011101] [101000000000010101]---+
    ```

  - Error Correction
    - It can be handled in two ways
      - Receiver can have the sender retransmit the entire data unit.
      - The receiver can use an eror-correcting code, which automatically corrects certain errors.

    ```[]
      Sender
    +----------------------+                          +------------------------+
    |             Encoder  |                          |               Decoder  |
    |      Message         |                          |     Message            |
    |         |            |                          |        |    Correct or |
    |      Generator       |                          |     Checker    discard |
    |         |            | Unreliable transmission  |        |               |
    | Message & redundancy-|--------------------------|-> Received information |
    +----------------------+                          +------------------------+
    ```

  - Error Detection techniques
    - Four types of redundancy checks are used in data communications.
      - Vertical Redundancy Check (VRC)
      - Logitudinal Redundancy Check (LRC)
      - Checksum (Internet Checksum / Arithmetic Checksum)
      - Cyclic Redundancy Check (CRC)

### Vertical Redundancy Check (VRC)

- It's also called as parity check.

```[]
  Data     1100001 
              |     \
              |        \
          Even Parity     \                     Receiver
           Generator    [1][1100001] ---------------->
              |       /  Data Transmitted       11100001
              |    /
    VRC     [ 1 ]
```

- Performance of VRC
  - It can detect single bit error.
  - It can detect burst error only if the number of errors is odd.
  - Example:
    - Sender (11100001) --> Transmission Error (1 **0** 100001) --> Receiver rejects this data
    - Sender (11100001) --> Transmission Error (1 **0** 100 **1** 01) --> Receiver accepts this data
